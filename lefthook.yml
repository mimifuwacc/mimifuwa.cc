commit-msg:
  skip: merge
  commands:
    commitlint:
      run: pnpx commitlint --edit {1}

pre-commit:
  commands:
    lint:
      run: pnpm run lint
    format:
      run: pnpm run format
    git-update:
      run: git update-index --again

pre-push:
  commands:
    format:
      run: pnpm run format

    prevent-direct-push:
      glob: '{main,devel}'
      run: |
        current_branch=$(git rev-parse --abbrev-ref HEAD)
        protected_branches="main devel"
        if [[ " ${protected_branches} " =~ " ${current_branch} " ]]; then
          echo -e "\033[31m! Direct pushes to the branch '${current_branch}' are forbidden. Use a pull request.\033[0m"
          exit 1
        fi
        exit 0